<!-- Download Confirmation Modal -->
<style>
  .custom-sq-btn {
    /* 1. Create the Square Aspect Ratio */
    width: 44px;
    height: 44px;
    padding: 0;
    /* Clear padding to ensure perfect centering */

    /* 2. Center the Icon */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
  }

  .icon-cheese {
    display: inline-block;
    width: 20px;
    height: 20px;
    background-color: currentColor;

    /* Apply the SVG as a mask */
    -webkit-mask: url('static/icons/cheese.svg') no-repeat center / contain;
    mask: url('static/icons/cheese.svg') no-repeat center / contain;

    /* Optional: "Brush size" hack for masks 
       This adds a tiny blur to make the icon appear slightly bolder */
    filter: drop-shadow(0 0 0.2px currentColor);
  }
</style>

<div class="modal fade" id="downloadConfirmModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Download</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Review the organization path before downloading.</p>

        <div class="mb-3">
          <label class="form-label text-muted small">Organization Root</label>
          <input type="text" class="form-control" value="{{ ORGANIZED_PATH }}" disabled readonly>
        </div>

        <div class="mb-3">
          <label for="confirm-path-input" class="form-label mb-1">Relative Path</label>
          <input type="text" class="form-control" id="confirm-path-input">
          <div class="form-text m-0" id="path-format-hint">Format: Author / Title</div>
          <br>
          <div class="d-flex align-items-center gap-1">
            <button type="button" class="btn btn-sm btn-outline-secondary py-0 d-flex align-items-center gap-1"
              id="add-series-btn" style="font-size: 0.75rem;">
              <i class="bi bi-plus-lg"></i> Series
            </button>
            <span id="series-name-preview" class="text-muted fst-italic me-2"
              style="font-size: 0.75rem; display: none;"></span>


          </div>

        </div>

        <div class="alert alert-light border small" role="alert">
          <strong>Full Path: </strong>
          <span class="text-muted">{{ ORGANIZED_PATH }}/</span><span id="full-path-preview"
            class="text-primary fw-bold"></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-outline-info custom-sq-btn" id="use-personal-fl-btn"
          data-bs-toggle="tooltip" title="Spend one Freeleech Wedge on this torrent" disabled>
          <span class="icon-cheese"></span>
        </button>
        <button type="button" class="btn btn-primary" id="confirm-download-btn">
          <i class="bi bi-download"></i> Start Download
        </button>
      </div>
    </div>
  </div>
</div>